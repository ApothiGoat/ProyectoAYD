2025-05-23 16:45:32,393 - erp_system - ERROR - ERROR: name 'db_service' is not defined
2025-05-23 16:45:32,393 - erp_system - ERROR - TRACE: Traceback (most recent call last):
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/Back/main.py", line 116, in login
    result = auth_service.login(credentials.username, credentials.password)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/Back/auth_service.py", line 38, in login
    user = db_service.get_user_by_username(username)
NameError: name 'db_service' is not defined

2025-05-23 16:45:54,989 - erp_system - ERROR - ERROR: name 'db_service' is not defined
2025-05-23 16:45:54,989 - erp_system - ERROR - TRACE: Traceback (most recent call last):
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/Back/main.py", line 116, in login
    result = auth_service.login(credentials.username, credentials.password)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/Back/auth_service.py", line 38, in login
    user = db_service.get_user_by_username(username)
NameError: name 'db_service' is not defined

2025-05-23 16:47:31,902 - erp_system - ERROR - ERROR: connection to server at "localhost" (127.0.0.1), port 5432 failed: FATAL:  role "erp_user" does not exist

2025-05-23 16:47:31,902 - erp_system - ERROR - TRACE: Traceback (most recent call last):
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/Back/main.py", line 116, in login
    result = auth_service.login(credentials.username, credentials.password)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/Back/auth_service.py", line 38, in login
    user = db_service.get_user_by_username(username)
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/Back/db_service.py", line 18, in get_user_by_username
    conn = get_connection()
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/Back/db_service.py", line 8, in get_connection
    conn = psycopg2.connect(
  File "/Users/alejandrogil/Desktop/Uni/2025-1/Analisis/ProyectoAYD/.venv/lib/python3.10/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (127.0.0.1), port 5432 failed: FATAL:  role "erp_user" does not exist


